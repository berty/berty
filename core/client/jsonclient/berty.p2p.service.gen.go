// this file was generated by protoc-gen-gotemplate

package jsonclient

import (
	"context"
	"encoding/json"

	"go.uber.org/zap"

	"github.com/berty/berty/core/api/p2p"
	"github.com/berty/berty/core/client"
)

func init() {
	registerUnary("berty.p2p.Handle", P2pHandle)
}

func P2pHandle(client *client.Client, ctx context.Context, jsonInput []byte) (interface{}, error) {
	zap.L().Debug("client call",
		zap.String("service", "Service"),
		zap.String("method", "Handle"),
		zap.String("input", string(jsonInput)),
	)

	var typedInput p2p.Event
	if err := json.Unmarshal(jsonInput, &typedInput); err != nil {
		return nil, err
	}
	return client.P2p().Handle(ctx, &typedInput)
}
